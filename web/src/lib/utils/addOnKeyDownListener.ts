import { onMount } from 'svelte';

type Key =
  | 'Backspace'
  | 'Tab'
  | 'Enter'
  | 'Shift'
  | 'Ctrl'
  | 'Alt'
  | 'PauseBreak'
  | 'CapsLock'
  | 'Escape'
  | 'Space'
  | 'PageUp'
  | 'PageDown'
  | 'End'
  | 'Home'
  | 'LeftArrow'
  | 'UpArrow'
  | 'RightArrow'
  | 'DownArrow'
  | 'Insert'
  | 'Delete'
  | 'Zero'
  | 'ClosedParen'
  | 'One'
  | 'ExclamationMark'
  | 'Two'
  | 'AtSign'
  | 'Three'
  | 'PoundSign'
  | 'Hash'
  | 'Four'
  | 'DollarSign'
  | 'Five'
  | 'PercentSign'
  | 'Six'
  | 'Caret'
  | 'Hat'
  | 'Seven'
  | 'Ampersand'
  | 'Eight'
  | 'Star'
  | 'Asterik'
  | 'Nine'
  | 'OpenParen'
  | 'A'
  | 'B'
  | 'C'
  | 'D'
  | 'E'
  | 'F'
  | 'G'
  | 'H'
  | 'I'
  | 'J'
  | 'K'
  | 'L'
  | 'M'
  | 'N'
  | 'O'
  | 'P'
  | 'Q'
  | 'R'
  | 'S'
  | 'T'
  | 'U'
  | 'V'
  | 'W'
  | 'X'
  | 'Y'
  | 'Z'
  | 'LeftWindowKey'
  | 'RightWindowKey'
  | 'SelectKey'
  | 'Numpad0'
  | 'Numpad1'
  | 'Numpad2'
  | 'Numpad3'
  | 'Numpad4'
  | 'Numpad5'
  | 'Numpad6'
  | 'Numpad7'
  | 'Numpad8'
  | 'Numpad9'
  | 'Multiply'
  | 'Add'
  | 'Subtract'
  | 'DecimalPoint'
  | 'Divide'
  | 'F1'
  | 'F2'
  | 'F3'
  | 'F4'
  | 'F5'
  | 'F6'
  | 'F7'
  | 'F8'
  | 'F9'
  | 'F10'
  | 'F11'
  | 'F12'
  | 'NumLock'
  | 'ScrollLock'
  | 'SemiColon'
  | 'Equals'
  | 'Comma'
  | 'Dash'
  | 'Period'
  | 'UnderScore'
  | 'PlusSign'
  | 'ForwardSlash'
  | 'Tilde'
  | 'GraveAccent'
  | 'OpenBracket'
  | 'ClosedBracket'
  | 'Quote';

export function addOnKeyDownListener(key: Key, handler: (e: KeyboardEvent) => void) {
  onMount(() => {
    const eventHandler = (e: KeyboardEvent) => {
      if (e.key === key) handler(e);
    };

    window.addEventListener('keydown', eventHandler);
    return () => window.removeEventListener('keydown', eventHandler);
  });
}
